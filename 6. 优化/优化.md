上一节我们解决了工程的开发调试问题，项目的生产和开发环境都已配置完成，并且约定了 Webpack 配置文件规范。但它还很粗糙，这一节我们就来一起完成对这个项目的优化。

## 压缩 CSS
Webpack 4 在 `production` 模式下是会默认压缩 JS 代码的，使用 [TerserWebpackPlugin](https://webpack.docschina.org/plugins/terser-webpack-plugin)，但 CSS 并不会（ Webpack 5 会作为内置功能 ），所以我们需要 [OptimizeCSSAssetsPlugin](https://github.com/NMFR/optimize-css-assets-webpack-plugin) 的帮助。

#### 安装
```bash
yarn add optimize-css-assets-webpack-plugin -D
```

#### 使用
Webpack 插件使用大同小异，但在 Webpack 4 中使用这个插件需要特别注意，使用它时会重写 `optimization.minimizer` 选项，而压缩 JS 的插件 TerserWebpackPlugin 恰好就在这个选项的默认值中，重写会导致默认值失效，所以你还需要显式地声明 TerserWebpackPlugin 实例。

`webpack.prod.conf.js` <font color=#999>添加如下内容</font>
```javascript
const TerserJSPlugin = require("terser-webpack-plugin")
const OptimizeCSSAssetsPlugin = require("optimize-css-assets-webpack-plugin")

module.exports = {
  optimization: {
    minimizer: [
      new TerserJSPlugin({
        parallel: true // 开启多线程压缩
      }),
      new OptimizeCSSAssetsPlugin({})
    ]
  }
}

```

## 代码分离


